# Backend Environment Variables Example
# Copy this file to .env and fill in the actual values
# DO NOT commit .env to version control
# When using docker-compose from repo root, the root .env is the source of truth; these match backend-related vars.

# ============================================
# Database
# ============================================

# PostgreSQL connection string for Prisma.
# Format: postgresql://user:password@host:port/database?connection_limit=100&pool_timeout=20&connect_timeout=10
# DEVELOPMENT: Use host "postgres" in Docker; app converts to localhost when running outside Docker.
# PRODUCTION: Use your DB host and connection pooling params.
# MUST MATCH: Same value as DATABASE_URL in root .env when using root .env for docker-compose.
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/mymoney?connection_limit=100&pool_timeout=20&connect_timeout=10

# ============================================
# Server
# ============================================

# Port for the GraphQL server.
# DEVELOPMENT: Typically 4000.
# PRODUCTION: Often not used directly (reverse proxy); used with Cloudflare Tunnel.
PORT=4000

# Runtime environment.
# DEVELOPMENT: Use "development".
# PRODUCTION: Use "production".
NODE_ENV=development

# ============================================
# OIDC Authentication
# ============================================

# OIDC provider discovery URL and client credentials. Required for authentication in production.
# MUST MATCH: OPENID_CLIENT_ID and OPENID_DISCOVERY_URL must match REACT_APP_OPENID_CLIENT_ID and REACT_APP_OPENID_DISCOVERY_URL in frontend .env.
OPENID_DISCOVERY_URL=http://localhost:8080/.well-known/openid-configuration
OPENID_CLIENT_ID=your-client-id
OPENID_CLIENT_SECRET=your-client-secret

# ============================================
# URLs (OAuth callbacks, links)
# ============================================

# Backend and frontend base URLs (used for OAuth redirect_uri and redirects to frontend).
# PRODUCTION: Use your real HTTPS URLs (e.g. https://api.example.com, https://app.example.com).
# DEVELOPMENT: Use http://localhost:PORT (match PORT above for backend; frontend typically 3000).
# MUST MATCH: FRONTEND_URL must match where frontend is served; REACT_APP_GRAPHQL_URL in frontend must point to this backend (BACKEND_URL/graphql).
BACKEND_URL=http://localhost:4000
FRONTEND_URL=http://localhost:3000

# ============================================
# CORS and CSRF
# ============================================

# CORS allowed origins (comma-separated). Backend allows requests from these origins.
# PRODUCTION: Your frontend domain(s), e.g. https://app.example.com.
# DEVELOPMENT: http://localhost:3000,http://127.0.0.1:3000 (match frontend port).
# MUST MATCH: Must allow the same origin as FRONTEND_URL; keep in sync with ALLOWED_ORIGINS and frontend origin.
CORS_ORIGIN=http://localhost:3000,http://127.0.0.1:3000

# CSRF allowed origins (comma-separated). Origins allowed for mutations.
# PRODUCTION: Your frontend domain(s).
# DEVELOPMENT: Same as CORS_ORIGIN (e.g. http://localhost:3000, http://127.0.0.1:3000).
# MUST MATCH: Should match CORS_ORIGIN and FRONTEND_URL origin.
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# ============================================
# Schedule
# ============================================

# When true, enables hourly and minutely recurring transaction schedules (default: false).
# MUST MATCH: Same value as REACT_APP_ENABLE_HOURLY_MINUTELY_SCHEDULES in frontend .env.
ENABLE_HOURLY_MINUTELY_SCHEDULES=false

