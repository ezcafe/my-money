# My Money Application - Environment Variables Example
# Copy this file to .env and fill in the actual values
# DO NOT commit .env to version control

# ============================================
# Backend Configuration
# ============================================

# Database Configuration
# Format: postgresql://user:password@host:port/database?connection_limit=100&pool_timeout=20&connect_timeout=10
#
# You can use 'postgres' as the hostname for both local development and Docker.
# The application automatically adjusts the hostname:
#   - In Docker: 'postgres' is used as-is (Docker service name)
#   - Local development: 'postgres' is automatically converted to 'localhost'
#
# For production, use connection pooling parameters in the URL
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/mymoney?connection_limit=100&pool_timeout=20&connect_timeout=10

# Server Configuration
PORT=4000
NODE_ENV=production

# Schedule Configuration
# Enable Hourly and Minutely schedule options (default: false)
# When true, enables hourly and minutely recurring transaction schedules
ENABLE_HOURLY_MINUTELY_SCHEDULES=false

# OIDC Authentication (Pocket ID or other OIDC provider)
# Required for authentication
OPENID_CLIENT_ID=your-client-id
OPENID_CLIENT_SECRET=your-client-secret
OPENID_DISCOVERY_URL=https://your-oidc-provider/.well-known/openid-configuration

# CORS Configuration
# Comma-separated list of allowed origins
# Example: http://localhost:3000,https://app.example.com
CORS_ORIGIN=http://localhost:3000,http://127.0.0.1:3000

# Backend and Frontend URLs (for OAuth callbacks)
# These must point to the actual externally reachable URLs
# Typically, the host + port here should match BACKEND_PORT and FRONTEND_PORT below.
# Examples for local Docker:
#   BACKEND_URL=http://localhost:${BACKEND_PORT}
#   FRONTEND_URL=http://localhost:${FRONTEND_PORT}
BACKEND_URL=http://localhost:4000
FRONTEND_URL=http://localhost:3000

# CSRF Protection (Production)
# Comma-separated list of allowed origins for CSRF validation
# Should match your frontend domain(s)
ALLOWED_ORIGINS=https://your-production-domain.com

# ============================================
# Frontend Configuration
# ============================================
# Note: Frontend environment variables must be prefixed with REACT_APP_
# These are injected at build time via webpack

# GraphQL API Endpoint
REACT_APP_GRAPHQL_URL=http://localhost:4000/graphql

# OIDC Configuration (Frontend)
REACT_APP_OPENID_CLIENT_ID=your-client-id
REACT_APP_OPENID_DISCOVERY_URL=https://your-oidc-provider/.well-known/openid-configuration

# OIDC Client Secret (Optional)
# Only required if your OIDC provider requires client_secret for public clients
# Most OIDC providers don't require this for public clients
REACT_APP_OPENID_CLIENT_SECRET=

# Schedule Configuration (Frontend)
# Enable Hourly and Minutely schedule options (default: false)
# When true, enables hourly and minutely recurring transaction schedules
REACT_APP_ENABLE_HOURLY_MINUTELY_SCHEDULES=false

# ============================================
# Docker Configuration (if using docker-compose)
# ============================================

# Application Ports (Docker / Local Development)
# These control the host ports exposed by docker-compose
BACKEND_PORT=4000
FRONTEND_PORT=3000

# PostgreSQL Configuration (for docker-compose)
# These are used by the postgres container and to construct DATABASE_URL if not set
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=mymoney
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Build Metadata (optional, used in Docker builds)
BUILD_DATE=
VCS_REF=
VERSION=1.0.0
NODE_VERSION=25.2.1
NGINX_VERSION=alpine
