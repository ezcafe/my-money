# My Money Application - Environment Variables Example
# Copy this file to .env and fill in the actual values
# DO NOT commit .env to version control

# ============================================
# Backend Configuration
# ============================================

# Database Configuration
# Format: postgresql://user:password@host:port/database?connection_limit=100&pool_timeout=20&connect_timeout=10
#
# You can use 'postgres' as the hostname for both local development and Docker.
# The application automatically adjusts the hostname:
#   - In Docker: 'postgres' is used as-is (Docker service name)
#   - Local development: 'postgres' is automatically converted to 'localhost'
#
# For production, use connection pooling parameters in the URL
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/mymoney?connection_limit=100&pool_timeout=20&connect_timeout=10

# Server Configuration
PORT=4000
NODE_ENV=production

# Schedule Configuration
# Enable Hourly and Minutely schedule options (default: false)
# When true, enables hourly and minutely recurring transaction schedules
ENABLE_HOURLY_MINUTELY_SCHEDULES=false

# OIDC Authentication (Pocket ID or other OIDC provider)
# Required for authentication
OPENID_CLIENT_ID=your-client-id
OPENID_CLIENT_SECRET=your-client-secret
OPENID_DISCOVERY_URL=https://your-oidc-provider/.well-known/openid-configuration

# CORS Configuration
# REQUIRED FOR PRODUCTION: Comma-separated list of allowed origins that can call the backend from the browser.
# ‚ö†Ô∏è PRODUCTION: Must match your actual frontend domain(s), e.g., https://app.example.com
#    (Applies to both Direct/Reverse Proxy and Cloudflare Tunnel deployments)
# üí° DEVELOPMENT: For local Docker, match where the frontend is exposed (FRONTEND_PORT).
#    Example: If FRONTEND_PORT=3000, use http://localhost:3000,http://127.0.0.1:3000
CORS_ORIGIN=http://localhost:3000,http://127.0.0.1:3000

# Backend and Frontend URLs (for OAuth callbacks)
# ‚ö†Ô∏è REQUIRED FOR PRODUCTION: These must point to your actual production URLs (HTTPS).
#    OAuth providers use these for redirect_uri validation - they MUST be correct!
#    Examples: https://api.example.com, https://app.example.com
#    (Applies to both Direct/Reverse Proxy and Cloudflare Tunnel deployments)
# üí° DEVELOPMENT: For local Docker, the host + port should match the exposed ports:
#    - BACKEND_URL host:port should match BACKEND_PORT (e.g., http://localhost:4000)
#    - FRONTEND_URL host:port should match FRONTEND_PORT (e.g., http://localhost:3000)
#    If you change BACKEND_PORT or FRONTEND_PORT, update these URLs accordingly.
BACKEND_URL=http://localhost:4000
FRONTEND_URL=http://localhost:3000

# CSRF Protection
# ‚ö†Ô∏è REQUIRED FOR PRODUCTION: Comma-separated list of allowed origins for CSRF validation.
#    Must match your actual frontend domain(s), e.g., https://app.example.com
#    (Applies to both Direct/Reverse Proxy and Cloudflare Tunnel deployments)
# üí° DEVELOPMENT: Should match your frontend URL (FRONTEND_URL / FRONTEND_PORT).
ALLOWED_ORIGINS=https://your-production-domain.com

# ============================================
# Frontend Configuration
# ============================================
# Note: Frontend environment variables must be prefixed with REACT_APP_
# These are injected at build time via webpack

# GraphQL API Endpoint
# ‚ö†Ô∏è REQUIRED FOR PRODUCTION: The URL the frontend uses to call the backend GraphQL API from the browser.
#    Must point to your actual backend URL (HTTPS), e.g., https://api.example.com/graphql
#    (Applies to both Direct/Reverse Proxy and Cloudflare Tunnel deployments)
# üí° DEVELOPMENT: For Docker-based setups, the host + port should match BACKEND_URL/BACKEND_PORT.
#    If you change BACKEND_PORT, update this URL accordingly (e.g., http://localhost:4567/graphql)
REACT_APP_GRAPHQL_URL=http://localhost:4000/graphql

# OIDC Configuration (Frontend)
REACT_APP_OPENID_CLIENT_ID=your-client-id
REACT_APP_OPENID_DISCOVERY_URL=https://your-oidc-provider/.well-known/openid-configuration

# OIDC Client Secret (Optional)
# Only required if your OIDC provider requires client_secret for public clients
# Most OIDC providers don't require this for public clients
REACT_APP_OPENID_CLIENT_SECRET=

# Schedule Configuration (Frontend)
# Enable Hourly and Minutely schedule options (default: false)
# When true, enables hourly and minutely recurring transaction schedules
REACT_APP_ENABLE_HOURLY_MINUTELY_SCHEDULES=false

# ============================================
# Docker Configuration (if using docker-compose)
# ============================================

# Application Ports (Docker / Local Development / Cloudflare Tunnel)
# üí° DEVELOPMENT: These control the host ports exposed by docker-compose.
#    You can change these if ports 3000/4000 are already in use on your machine.
#    If you change these, remember to update:
#    - BACKEND_URL to match BACKEND_PORT
#    - FRONTEND_URL to match FRONTEND_PORT
#    - REACT_APP_GRAPHQL_URL to match BACKEND_PORT
#    - CORS_ORIGIN to match FRONTEND_PORT
# ‚ö†Ô∏è PRODUCTION (Direct/Reverse Proxy): These are typically not used (ports handled by reverse proxy/load balancer)
# ‚ö†Ô∏è PRODUCTION (Cloudflare Tunnel): These ARE used! Cloudflare Tunnel connects to localhost using these ports.
#    Example: If BACKEND_PORT=4567, your Cloudflare Tunnel config.yml should have:
#      - hostname: api.example.com
#        service: http://localhost:4567
#    Note: Even with Cloudflare Tunnel, your BACKEND_URL, FRONTEND_URL, REACT_APP_GRAPHQL_URL, and CORS_ORIGIN
#    should use your production domain URLs (HTTPS), NOT localhost.
BACKEND_PORT=4000
FRONTEND_PORT=3000

# PostgreSQL Configuration (for docker-compose)
# These are used by the postgres container and to construct DATABASE_URL if not set
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=mymoney
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Build Metadata (optional, used in Docker builds)
BUILD_DATE=
VCS_REF=
VERSION=1.0.0
NODE_VERSION=25.2.1
NGINX_VERSION=alpine
